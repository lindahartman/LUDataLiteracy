<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Practical 5: Pivots + great tables ‚Äì LUDataLiteracy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-75f85ff3afe47a507ba5bdac098e00a3.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-fc481145a034a9bc6707220edadee8cb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<style>
div.callout-question.callout {
  border-left-color: pink;
}
div.callout-question.callout-style-default > .callout-header {
  background-color: rgb(from pink r g b / 13%);
}
div.callout-question .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-question.callout-style-default .callout-icon::before, div.callout-question.callout-titled .callout-icon::before {
  content: 'üß†';
  background-image: none;
}
div.callout-challenge.callout {
  border-left-color: firebrick;
}
div.callout-challenge.callout-style-default > .callout-header {
  background-color: rgb(from firebrick r g b / 13%);
}
div.callout-challenge .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-challenge.callout-style-default .callout-icon::before, div.callout-challenge.callout-titled .callout-icon::before {
  content: 'üõ†Ô∏è';
  background-image: none;
}
</style>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./brand/LU_logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">LUDataLiteracy</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-practicals" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Practicals</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-practicals">    
        <li>
    <a class="dropdown-item" href="./1_DataViz.html">
 <span class="dropdown-text">Practical 1: Data Visualization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_DataViz_wrangling.html">
 <span class="dropdown-text">Practical 2: Data Visualization + Wrangling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./3_Wrangling_GT.html">
 <span class="dropdown-text">Practical 3: Data Wrangling + great tables</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./4_Wrangling_joins.html">
 <span class="dropdown-text">Practical 4: Data Wrangling + joins</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./5_Pivots_GT.html">
 <span class="dropdown-text">Practical 5: Pivots + great tables</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./6_Quarto.html">
 <span class="dropdown-text">Practical 6: Producing reports with Quarto</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-solutions" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Solutions</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-solutions">    
        <li>
    <a class="dropdown-item" href="./1_DataViz_sol.html">
 <span class="dropdown-text">Practical 1: Data Visualization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_DataViz_wrangling_sol.html">
 <span class="dropdown-text">Practical 2: Data Visualization + Wrangling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./3_Wrangling_GT_sol.html">
 <span class="dropdown-text">Practical 3: Data Wrangling + great tables</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./4_Wrangling_joins_sol.html">
 <span class="dropdown-text">Practical 4: Data Wrangling + joins</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./5_Pivots_GT_sol.html">
 <span class="dropdown-text">Practical 5: Pivots + great tables</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data">    
        <li>
    <a class="dropdown-item" href="./Utrecht.html">
 <span class="dropdown-text">Utrecht Housing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./KingsCounty.html">
 <span class="dropdown-text">Kings County Housing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./CIA.html">
 <span class="dropdown-text">CIA Factbook</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Ames_houses.html">
 <span class="dropdown-text">Ames Housing Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Ames_schools.html">
 <span class="dropdown-text">Ames Schools</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#preparation" id="toc-preparation" class="nav-link active" data-scroll-target="#preparation">Preparation</a></li>
  <li><a href="#cia" id="toc-cia" class="nav-link" data-scroll-target="#cia">CIA</a>
  <ul class="collapse">
  <li><a href="#challenge-1" id="toc-challenge-1" class="nav-link" data-scroll-target="#challenge-1">Challenge 1</a></li>
  <li><a href="#challenge-2" id="toc-challenge-2" class="nav-link" data-scroll-target="#challenge-2">Challenge 2</a></li>
  <li><a href="#challenge-3" id="toc-challenge-3" class="nav-link" data-scroll-target="#challenge-3">Challenge 3</a></li>
  <li><a href="#challenge-4" id="toc-challenge-4" class="nav-link" data-scroll-target="#challenge-4">Challenge 4</a></li>
  <li><a href="#challenge-5" id="toc-challenge-5" class="nav-link" data-scroll-target="#challenge-5">Challenge 5</a></li>
  <li><a href="#challenge-6" id="toc-challenge-6" class="nav-link" data-scroll-target="#challenge-6">Challenge 6</a></li>
  <li><a href="#challenge-7" id="toc-challenge-7" class="nav-link" data-scroll-target="#challenge-7">Challenge 7</a></li>
  </ul></li>
  <li><a href="#utrecht" id="toc-utrecht" class="nav-link" data-scroll-target="#utrecht">Utrecht</a>
  <ul class="collapse">
  <li><a href="#challenge-8" id="toc-challenge-8" class="nav-link" data-scroll-target="#challenge-8">Challenge 8</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Practical 5: Pivots + great tables</h1>
</div>



<div class="quarto-title-meta column-page-left">

    
  
    
  </div>
  


</header>


<p>The objective of the tutorial is to give student a chance to practice the data wrangling and joins applying the skills learned through the video lessons on a new dataset.</p>
<section id="preparation" class="level2">
<h2 class="anchored" data-anchor-id="preparation">Preparation</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before you begin your peer-programming session, please, start the new Jupyter notebook environment in your terminal from your project directory using the command you learned in Module 1 of the course.</p>
<pre><code>uv run jupyter lab</code></pre>
<p>Create a new notebook and add a text cell atop your document for this practical session. Add a header <code># Pivots and great tables</code>. Then add a code cell and place the following code there.</p>
<div id="3496e8c3" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars.selectors <span class="im">as</span> cs</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> great_tables <span class="im">import</span> GT</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then import the datasets for this practical. Add another code cell below (using the key ‚ÄòB‚Äô) and paste the following code. This will import .</p>
<div id="4b9957d9" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ut <span class="op">=</span> pl.read_csv(<span class="st">"https://bit.ly/data24utrecht"</span>, try_parse_dates<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>cia_area <span class="op">=</span> pl.read_csv(<span class="st">"https://bit.ly/data24ciaarea"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>cia_commtran <span class="op">=</span> pl.read_csv(<span class="st">"https://bit.ly/data24ciacommtran"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>cia_ecosec <span class="op">=</span> pl.read_csv(<span class="st">"https://bit.ly/data24ciaecosec"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>cia_enenv <span class="op">=</span> pl.read_csv(<span class="st">"https://bit.ly/data24ciaenenv"</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>cia_pplsoc <span class="op">=</span> pl.read_csv(<span class="st">"https://bit.ly/data24ciapplsoc"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>iso_df <span class="op">=</span> pl.read_csv(<span class="st">"https://bit.ly/data24-countrycodes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="cia" class="level1">
<h1>CIA</h1>
<p>Answer the following challenges using <a href="./CIA.html">CIA</a> datasets.</p>
<section id="challenge-1" class="level2">
<h2 class="anchored" data-anchor-id="challenge-1">Challenge 1</h2>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>Calculate share of GDP from sources other than industry, services and agriculture for all countries in Africa. Present results in great table sorted from largest to smallest. Do you find anything strange about the data?</p>
</div>
</div>
<div id="1a049fb3" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    cia_ecosec</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">filter</span>(pl.col(<span class="st">'region'</span>)<span class="op">==</span><span class="st">'Africa'</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    .select(<span class="st">'name'</span>, cs.starts_with(<span class="st">'gdp_composition'</span>))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    .unpivot(on<span class="op">=</span>cs.starts_with(<span class="st">'gdp_composition'</span>), index<span class="op">=</span><span class="st">'name'</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    .group_by(<span class="st">'name'</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    .agg(other_sources<span class="op">=</span><span class="dv">100</span><span class="op">-</span>pl.col(<span class="st">'value'</span>).<span class="bu">sum</span>())</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    .sort(<span class="st">'other_sources'</span>, descending<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    .pipe(GT)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>     .cols_label(name<span class="op">=</span><span class="st">"Country"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>                 other_sources<span class="op">=</span><span class="st">"GDP from other sector (%)"</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>     .fmt_number(<span class="st">'other_sources'</span>,decimals<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>     .tab_header(title<span class="op">=</span><span class="st">"GDP share from other sectors*"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>         subtitle<span class="op">=</span><span class="st">"Africal countries, sorted by share"</span>)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>       .tab_source_note(<span class="st">" Other than industry, services and agriculture"</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>         .opt_stylize(style<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div id="qoxzcuczsf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#qoxzcuczsf table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#qoxzcuczsf thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#qoxzcuczsf p { margin: 0; padding: 0; }
 #qoxzcuczsf .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #004D80; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #004D80; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #qoxzcuczsf .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #qoxzcuczsf .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #qoxzcuczsf .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #qoxzcuczsf .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #qoxzcuczsf .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; }
 #qoxzcuczsf .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #qoxzcuczsf .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #qoxzcuczsf .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #qoxzcuczsf .gt_column_spanner_outer:first-child { padding-left: 0; }
 #qoxzcuczsf .gt_column_spanner_outer:last-child { padding-right: 0; }
 #qoxzcuczsf .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #qoxzcuczsf .gt_spanner_row { border-bottom-style: hidden; }
 #qoxzcuczsf .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #qoxzcuczsf .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; vertical-align: middle; }
 #qoxzcuczsf .gt_from_md> :first-child { margin-top: 0; }
 #qoxzcuczsf .gt_from_md> :last-child { margin-bottom: 0; }
 #qoxzcuczsf .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #89D3FE; border-left-style: none; border-left-width: 1px; border-left-color: #89D3FE; border-right-style: none; border-right-width: 1px; border-right-color: #89D3FE; vertical-align: middle; overflow-x: hidden; }
 #qoxzcuczsf .gt_stub { color: #FFFFFF; background-color: #0076BA; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #0076BA; padding-left: 5px; padding-right: 5px; }
 #qoxzcuczsf .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #qoxzcuczsf .gt_row_group_first td { border-top-width: 2px; }
 #qoxzcuczsf .gt_row_group_first th { border-top-width: 2px; }
 #qoxzcuczsf .gt_striped { color: #333333; background-color: #F4F4F4; }
 #qoxzcuczsf .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; }
 #qoxzcuczsf .gt_grand_summary_row { color: #333333; background-color: #89D3FE; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }
 #qoxzcuczsf .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }
 #qoxzcuczsf .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }
 #qoxzcuczsf .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #qoxzcuczsf .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #qoxzcuczsf .gt_left { text-align: left; }
 #qoxzcuczsf .gt_center { text-align: center; }
 #qoxzcuczsf .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #qoxzcuczsf .gt_font_normal { font-weight: normal; }
 #qoxzcuczsf .gt_font_bold { font-weight: bold; }
 #qoxzcuczsf .gt_font_italic { font-style: italic; }
 #qoxzcuczsf .gt_super { font-size: 65%; }
 #qoxzcuczsf .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #qoxzcuczsf .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="2" class="gt_heading gt_title gt_font_normal">GDP share from other sectors*</th>
</tr>
<tr class="gt_heading even">
<th colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Africal countries, sorted by share</th>
</tr>
<tr class="gt_col_headings header">
<th id="name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Country</th>
<th id="other_sources" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">GDP from other sector (%)</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left">Somalia</td>
<td class="gt_row gt_right">100.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Sudan</td>
<td class="gt_row gt_right gt_striped">81.6</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Tanzania</td>
<td class="gt_row gt_right">19.7</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Seychelles</td>
<td class="gt_row gt_right gt_striped">17.2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Burundi</td>
<td class="gt_row gt_right">16.4</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Cabo Verde</td>
<td class="gt_row gt_right gt_striped">14.2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Mauritius</td>
<td class="gt_row gt_right">13.0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Lesotho</td>
<td class="gt_row gt_right gt_striped">12.8</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Burkina Faso</td>
<td class="gt_row gt_right">10.8</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Morocco</td>
<td class="gt_row gt_right gt_striped">10.3</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Central African Republic</td>
<td class="gt_row gt_right">10.2</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Togo</td>
<td class="gt_row gt_right gt_striped">10.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Mozambique</td>
<td class="gt_row gt_right">9.9</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">South Africa</td>
<td class="gt_row gt_right gt_striped">9.9</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Benin</td>
<td class="gt_row gt_right">9.6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Senegal</td>
<td class="gt_row gt_right gt_striped">9.1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Madagascar</td>
<td class="gt_row gt_right">9.1</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Namibia</td>
<td class="gt_row gt_right gt_striped">8.9</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Gambia, The</td>
<td class="gt_row gt_right">8.7</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Guinea</td>
<td class="gt_row gt_right gt_striped">8.6</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Uganda</td>
<td class="gt_row gt_right">7.8</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Mali</td>
<td class="gt_row gt_right gt_striped">7.7</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Zimbabwe</td>
<td class="gt_row gt_right">7.6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Malawi</td>
<td class="gt_row gt_right gt_striped">7.4</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Rwanda</td>
<td class="gt_row gt_right">7.1</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Ghana</td>
<td class="gt_row gt_right gt_striped">6.9</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Cote d'Ivoire</td>
<td class="gt_row gt_right">6.8</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Mauritania</td>
<td class="gt_row gt_right gt_striped">6.7</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Cameroon</td>
<td class="gt_row gt_right">6.5</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Zambia</td>
<td class="gt_row gt_right gt_striped">6.2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Kenya</td>
<td class="gt_row gt_right">6.1</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Djibouti</td>
<td class="gt_row gt_right gt_striped">6.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Congo, Republic of the</td>
<td class="gt_row gt_right">5.4</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Niger</td>
<td class="gt_row gt_right gt_striped">5.1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Egypt</td>
<td class="gt_row gt_right">5.1</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Guinea-Bissau</td>
<td class="gt_row gt_right gt_striped">5.1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Gabon</td>
<td class="gt_row gt_right">4.9</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Eswatini</td>
<td class="gt_row gt_right gt_striped">4.9</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Tunisia</td>
<td class="gt_row gt_right">4.9</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Botswana</td>
<td class="gt_row gt_right gt_striped">4.7</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Comoros</td>
<td class="gt_row gt_right">4.2</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Liberia</td>
<td class="gt_row gt_right gt_striped">3.7</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Algeria</td>
<td class="gt_row gt_right">3.7</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Sierra Leone</td>
<td class="gt_row gt_right gt_striped">3.1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Ethiopia</td>
<td class="gt_row gt_right">2.7</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Sao Tome and Principe</td>
<td class="gt_row gt_right gt_striped">2.7</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Congo, Democratic Republic of the</td>
<td class="gt_row gt_right">2.6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Nigeria</td>
<td class="gt_row gt_right gt_striped">1.9</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Chad</td>
<td class="gt_row gt_right">1.8</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Equatorial Guinea</td>
<td class="gt_row gt_right gt_striped">1.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Angola</td>
<td class="gt_row gt_right">0.1</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Eritrea</td>
<td class="gt_row gt_right gt_striped">0.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">South Sudan</td>
<td class="gt_row gt_right">‚àí0.1</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Libya</td>
<td class="gt_row gt_right gt_striped">‚àí33.2</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="odd">
<td colspan="2" class="gt_sourcenote">Other than industry, services and agriculture</td>
</tr>
</tfoot>

</table>


</div>
        
</div>
</div>
</section>
<section id="challenge-2" class="level2">
<h2 class="anchored" data-anchor-id="challenge-2">Challenge 2</h2>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<div class="line-block">Select the summary percentiles produced by the <code>.describe()</code> method for all variables containing the term ‚Äúrate‚Äù in the People and Society dataset and plot the point estimates using a set of points for every variable. Color the points by the percentile level.<br>
<span class="emoji" data-emoji="bulb">üí°</span> Minimum value is corresponding to the 0th percentile and maximum is coinciding with the 100th percentile.<br>
<span class="emoji" data-emoji="bulb">üí°</span> If you want to convert percentile string value to a number try <code>str.replace("%","").str.to_integer()</code></div>
</div>
</div>
<div id="ad3afb76" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    cia_pplsoc</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    .describe()</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    .select(<span class="st">"statistic"</span>, cs.contains(<span class="st">"rate"</span>))</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    .tail(<span class="dv">5</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    .unpivot(index<span class="op">=</span><span class="st">"statistic"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    .with_columns(statistic<span class="op">=</span>pl.when(pl.col(<span class="st">"statistic"</span>)<span class="op">==</span><span class="st">"min"</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                        .then(pl.lit(<span class="st">"0%"</span>))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>                        .when(pl.col(<span class="st">"statistic"</span>)<span class="op">==</span><span class="st">"max"</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                        .then(pl.lit(<span class="st">"100%"</span>))</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                        .otherwise(pl.col(<span class="st">"statistic"</span>)))</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make numeric statistic to sort correctly in label</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  .with_columns(pl.col(<span class="st">'statistic'</span>).</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>   <span class="bu">str</span>.replace(<span class="st">"%"</span>,<span class="st">""</span>).<span class="bu">str</span>.to_integer().alias(<span class="st">"statisticI"</span>))</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    .pipe(ggplot, aes(x<span class="op">=</span><span class="st">"variable"</span>, y<span class="op">=</span><span class="st">"value"</span>, color<span class="op">=</span><span class="st">"reorder(statistic,statisticI)"</span>))</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>     <span class="op">+</span> geom_point(size<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>     <span class="op">+</span> coord_flip()</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span>labs(color<span class="op">=</span><span class="st">"Percentile"</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>
<figure class="figure">
<p><img src="5_Pivots_GT_sol_files/figure-html/cell-5-output-1.png" width="672" height="480" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="challenge-3" class="level2">
<h2 class="anchored" data-anchor-id="challenge-3">Challenge 3</h2>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<div class="line-block">Reproduce the plot.<br>
<span class="emoji" data-emoji="bulb">üí°</span> The plot is built using <code>geom_segment()</code></div>
</div>
</div>
<div id="1b751f77" class="cell" data-execution_count="5">
<div class="cell-output cell-output-display" data-execution_count="5">
<div>
<figure class="figure">
<p><img src="5_Pivots_GT_sol_files/figure-html/cell-6-output-1.png" width="672" height="480" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="4799b1fd" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    cia_pplsoc.describe()</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    .select(<span class="st">"statistic"</span>, cs.contains(<span class="st">"rate"</span>))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    .tail(<span class="dv">5</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    .unpivot(index<span class="op">=</span><span class="st">"statistic"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        statistic<span class="op">=</span>pl.when(pl.col(<span class="st">"statistic"</span>) <span class="op">==</span> <span class="st">"min"</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        .then(pl.lit(<span class="st">"q_0%"</span>))</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        .when(pl.col(<span class="st">"statistic"</span>) <span class="op">==</span> <span class="st">"max"</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        .then(pl.lit(<span class="st">"q_100%"</span>))</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        .otherwise(pl.lit(<span class="st">"q_"</span>) <span class="op">+</span> pl.col(<span class="st">"statistic"</span>))</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    .pivot(on<span class="op">=</span><span class="st">"statistic"</span>, values<span class="op">=</span><span class="st">"value"</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    .pipe(ggplot)<span class="op">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    geom_point(aes(y<span class="op">=</span><span class="st">"q_50%"</span>, x<span class="op">=</span><span class="st">"variable"</span>), size<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_segment(aes(x<span class="op">=</span><span class="st">"variable"</span>, xend<span class="op">=</span><span class="st">"variable"</span>, y<span class="op">=</span><span class="st">"q_25%"</span>, yend<span class="op">=</span><span class="st">"q_75%"</span>), size<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_segment(aes(x<span class="op">=</span><span class="st">"variable"</span>, xend<span class="op">=</span><span class="st">"variable"</span>, y<span class="op">=</span><span class="st">"q_0%"</span>, yend<span class="op">=</span><span class="st">"q_100%"</span>), size<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> coord_flip()</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">"Rate"</span>, title<span class="op">=</span><span class="st">"People and Society metics"</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>            subtitle<span class="op">=</span><span class="st">"Min, max, median and interquartile range"</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>            caption<span class="op">=</span><span class="st">"Source: CIA Factbook 2024"</span>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="challenge-4" class="level2">
<h2 class="anchored" data-anchor-id="challenge-4">Challenge 4</h2>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<div class="line-block">Compare the values of variables containing the term ‚Äúrate‚Äù in the People and Society dataset for Sweden and Denmark. Present results as a great table with two columns - one for each country.<br>
<span class="emoji" data-emoji="bulb">üí°</span> See if you can make the table look more clean by replacing some symbols with <code>.str.replace_all()</code></div>
</div>
</div>
<div id="44eca677" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    cia_pplsoc</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    .select(<span class="st">'name'</span>, cs.ends_with(<span class="st">'_rate'</span>))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">filter</span>(pl.col(<span class="st">'name'</span>).is_in([<span class="st">'Denmark'</span>, <span class="st">'Sweden'</span>]))</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    .unpivot(on<span class="op">=</span>cs.ends_with(<span class="st">'rate'</span>), index<span class="op">=</span><span class="st">'name'</span>, variable_name<span class="op">=</span><span class="st">"rate"</span>, value_name<span class="op">=</span><span class="st">"value"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    .pivot(on<span class="op">=</span><span class="st">'name'</span>, index<span class="op">=</span><span class="st">'rate'</span>, values<span class="op">=</span><span class="st">'value'</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    .with_columns(rate<span class="op">=</span>pl.col(<span class="st">'rate'</span>).<span class="bu">str</span>.replace_all(<span class="st">'_'</span>, <span class="st">' '</span>).<span class="bu">str</span>.to_titlecase())</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    .pipe(GT)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    .opt_stylize(<span class="dv">1</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div id="ynqulozyfa" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#ynqulozyfa table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#ynqulozyfa thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#ynqulozyfa p { margin: 0; padding: 0; }
 #ynqulozyfa .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #004D80; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #004D80; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #ynqulozyfa .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #ynqulozyfa .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #ynqulozyfa .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #ynqulozyfa .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #ynqulozyfa .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; }
 #ynqulozyfa .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #ynqulozyfa .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #ynqulozyfa .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #ynqulozyfa .gt_column_spanner_outer:first-child { padding-left: 0; }
 #ynqulozyfa .gt_column_spanner_outer:last-child { padding-right: 0; }
 #ynqulozyfa .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #ynqulozyfa .gt_spanner_row { border-bottom-style: hidden; }
 #ynqulozyfa .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #ynqulozyfa .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; vertical-align: middle; }
 #ynqulozyfa .gt_from_md> :first-child { margin-top: 0; }
 #ynqulozyfa .gt_from_md> :last-child { margin-bottom: 0; }
 #ynqulozyfa .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #89D3FE; border-left-style: none; border-left-width: 1px; border-left-color: #89D3FE; border-right-style: none; border-right-width: 1px; border-right-color: #89D3FE; vertical-align: middle; overflow-x: hidden; }
 #ynqulozyfa .gt_stub { color: #FFFFFF; background-color: #0076BA; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #0076BA; padding-left: 5px; padding-right: 5px; }
 #ynqulozyfa .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #ynqulozyfa .gt_row_group_first td { border-top-width: 2px; }
 #ynqulozyfa .gt_row_group_first th { border-top-width: 2px; }
 #ynqulozyfa .gt_striped { color: #333333; background-color: #F4F4F4; }
 #ynqulozyfa .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; }
 #ynqulozyfa .gt_grand_summary_row { color: #333333; background-color: #89D3FE; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }
 #ynqulozyfa .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }
 #ynqulozyfa .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }
 #ynqulozyfa .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #ynqulozyfa .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #ynqulozyfa .gt_left { text-align: left; }
 #ynqulozyfa .gt_center { text-align: center; }
 #ynqulozyfa .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #ynqulozyfa .gt_font_normal { font-weight: normal; }
 #ynqulozyfa .gt_font_bold { font-weight: bold; }
 #ynqulozyfa .gt_font_italic { font-style: italic; }
 #ynqulozyfa .gt_super { font-size: 65%; }
 #ynqulozyfa .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #ynqulozyfa .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="rate" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">rate</th>
<th id="Denmark" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Denmark</th>
<th id="Sweden" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Sweden</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left">Birth Rate</td>
<td class="gt_row gt_right">11.3</td>
<td class="gt_row gt_right">10.7</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Death Rate</td>
<td class="gt_row gt_right gt_striped">9.6</td>
<td class="gt_row gt_right gt_striped">9.6</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Infant Mortality Rate</td>
<td class="gt_row gt_right">3.0</td>
<td class="gt_row gt_right">2.3</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Net Migration Rate</td>
<td class="gt_row gt_right gt_striped">2.7</td>
<td class="gt_row gt_right gt_striped">4.0</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Obesity Adult Prevalence Rate</td>
<td class="gt_row gt_right">19.7</td>
<td class="gt_row gt_right">20.6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">Population Growth Rate</td>
<td class="gt_row gt_right gt_striped">0.44</td>
<td class="gt_row gt_right gt_striped">0.51</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">Total Fertility Rate</td>
<td class="gt_row gt_right">1.77</td>
<td class="gt_row gt_right">1.67</td>
</tr>
</tbody>
</table>


</div>
        
</div>
</div>
</section>
<section id="challenge-5" class="level2">
<h2 class="anchored" data-anchor-id="challenge-5">Challenge 5</h2>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<div class="line-block">Create a great table comparing the proportion of missing values across all numeric columns in the joined CIA Factbook datasets by region.</div>
</div>
</div>
<div id="dac94fdf" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    cia_area</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    .join(cia_commtran, on<span class="op">=</span>[<span class="st">"name"</span>, <span class="st">"slug"</span>, <span class="st">"region"</span>], how<span class="op">=</span><span class="st">"full"</span>, coalesce<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    .join(cia_ecosec, on<span class="op">=</span>[<span class="st">"name"</span>, <span class="st">"slug"</span>, <span class="st">"region"</span>], how<span class="op">=</span><span class="st">"full"</span>, coalesce<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    .join(cia_enenv, on<span class="op">=</span>[<span class="st">"name"</span>, <span class="st">"slug"</span>, <span class="st">"region"</span>], how<span class="op">=</span><span class="st">"full"</span>, coalesce<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    .join(cia_pplsoc, on<span class="op">=</span>[<span class="st">"name"</span>, <span class="st">"slug"</span>, <span class="st">"region"</span>], how<span class="op">=</span><span class="st">"full"</span>, coalesce<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    .group_by(<span class="st">'region'</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    .agg(cs.<span class="bu">all</span>().is_null().mean())</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    .drop(<span class="st">"name"</span>, <span class="st">"slug"</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    .unpivot(index<span class="op">=</span><span class="st">'region'</span>)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    .pivot(on<span class="op">=</span><span class="st">"region"</span>, index<span class="op">=</span><span class="st">"variable"</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    .pipe(GT)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    .fmt_percent(columns<span class="op">=</span>cs.numeric(), decimals<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    .opt_stylize(<span class="dv">1</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div id="hoixaanshn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#hoixaanshn table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#hoixaanshn thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#hoixaanshn p { margin: 0; padding: 0; }
 #hoixaanshn .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #004D80; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #004D80; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #hoixaanshn .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #hoixaanshn .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #hoixaanshn .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #hoixaanshn .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #hoixaanshn .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; }
 #hoixaanshn .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #hoixaanshn .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #hoixaanshn .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #hoixaanshn .gt_column_spanner_outer:first-child { padding-left: 0; }
 #hoixaanshn .gt_column_spanner_outer:last-child { padding-right: 0; }
 #hoixaanshn .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #hoixaanshn .gt_spanner_row { border-bottom-style: hidden; }
 #hoixaanshn .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #hoixaanshn .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; vertical-align: middle; }
 #hoixaanshn .gt_from_md> :first-child { margin-top: 0; }
 #hoixaanshn .gt_from_md> :last-child { margin-bottom: 0; }
 #hoixaanshn .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #89D3FE; border-left-style: none; border-left-width: 1px; border-left-color: #89D3FE; border-right-style: none; border-right-width: 1px; border-right-color: #89D3FE; vertical-align: middle; overflow-x: hidden; }
 #hoixaanshn .gt_stub { color: #FFFFFF; background-color: #0076BA; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #0076BA; padding-left: 5px; padding-right: 5px; }
 #hoixaanshn .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #hoixaanshn .gt_row_group_first td { border-top-width: 2px; }
 #hoixaanshn .gt_row_group_first th { border-top-width: 2px; }
 #hoixaanshn .gt_striped { color: #333333; background-color: #F4F4F4; }
 #hoixaanshn .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; }
 #hoixaanshn .gt_grand_summary_row { color: #333333; background-color: #89D3FE; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }
 #hoixaanshn .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }
 #hoixaanshn .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }
 #hoixaanshn .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #hoixaanshn .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #hoixaanshn .gt_left { text-align: left; }
 #hoixaanshn .gt_center { text-align: center; }
 #hoixaanshn .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #hoixaanshn .gt_font_normal { font-weight: normal; }
 #hoixaanshn .gt_font_bold { font-weight: bold; }
 #hoixaanshn .gt_font_italic { font-style: italic; }
 #hoixaanshn .gt_super { font-size: 65%; }
 #hoixaanshn .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #hoixaanshn .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="variable" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">variable</th>
<th id="South-America" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">South America</th>
<th id="Africa" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Africa</th>
<th id="Middle-East" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Middle East</th>
<th id="Antarctica" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Antarctica</th>
<th id="South-Asia" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">South Asia</th>
<th id="Australia-and-Oceania" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Australia and Oceania</th>
<th id="Central-Asia" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Central Asia</th>
<th id="North-America" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">North America</th>
<th id="Central-America-and-the-Caribbean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Central America and the Caribbean</th>
<th id="East-and-Southeast-Asia" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">East and Southeast Asia</th>
<th id="Europe" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Europe</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left">area_sqkm</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">25.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">2.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">airports</td>
<td class="gt_row gt_right gt_striped">7.1%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">5.3%</td>
<td class="gt_row gt_right gt_striped">50.0%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">27.8%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">3.0%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">13.2%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">broadband_fixed_subscriptions</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">3.6%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">52.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">28.6%</td>
<td class="gt_row gt_right">18.2%</td>
<td class="gt_row gt_right">13.6%</td>
<td class="gt_row gt_right">11.3%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">internet_users</td>
<td class="gt_row gt_right gt_striped">7.1%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">75.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">27.8%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">3.0%</td>
<td class="gt_row gt_right gt_striped">13.6%</td>
<td class="gt_row gt_right gt_striped">7.5%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">merchant_marine</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">27.3%</td>
<td class="gt_row gt_right">15.8%</td>
<td class="gt_row gt_right">75.0%</td>
<td class="gt_row gt_right">44.4%</td>
<td class="gt_row gt_right">47.2%</td>
<td class="gt_row gt_right">50.0%</td>
<td class="gt_row gt_right">28.6%</td>
<td class="gt_row gt_right">21.2%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">26.4%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">railways</td>
<td class="gt_row gt_right gt_striped">28.6%</td>
<td class="gt_row gt_right gt_striped">32.7%</td>
<td class="gt_row gt_right gt_striped">42.1%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">44.4%</td>
<td class="gt_row gt_right gt_striped">88.9%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">57.1%</td>
<td class="gt_row gt_right gt_striped">75.8%</td>
<td class="gt_row gt_right gt_striped">36.4%</td>
<td class="gt_row gt_right gt_striped">26.4%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">roadways</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">5.3%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">33.3%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">28.6%</td>
<td class="gt_row gt_right">18.2%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">7.5%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">telephones_fixed_lines</td>
<td class="gt_row gt_right gt_striped">7.1%</td>
<td class="gt_row gt_right gt_striped">1.8%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">41.7%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">12.1%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">9.4%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">telephones_mobile_cellular</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">44.4%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">28.6%</td>
<td class="gt_row gt_right">6.1%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">9.4%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">waterways</td>
<td class="gt_row gt_right gt_striped">21.4%</td>
<td class="gt_row gt_right gt_striped">45.5%</td>
<td class="gt_row gt_right gt_striped">78.9%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">55.6%</td>
<td class="gt_row gt_right gt_striped">91.7%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">57.1%</td>
<td class="gt_row gt_right gt_striped">75.8%</td>
<td class="gt_row gt_right gt_striped">31.8%</td>
<td class="gt_row gt_right gt_striped">35.8%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">current_account_balance</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">58.3%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">42.9%</td>
<td class="gt_row gt_right">15.2%</td>
<td class="gt_row gt_right">13.6%</td>
<td class="gt_row gt_right">20.8%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">debt_external</td>
<td class="gt_row gt_right gt_striped">42.9%</td>
<td class="gt_row gt_right gt_striped">20.0%</td>
<td class="gt_row gt_right gt_striped">47.4%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">22.2%</td>
<td class="gt_row gt_right gt_striped">86.1%</td>
<td class="gt_row gt_right gt_striped">16.7%</td>
<td class="gt_row gt_right gt_striped">85.7%</td>
<td class="gt_row gt_right gt_striped">63.6%</td>
<td class="gt_row gt_right gt_striped">77.3%</td>
<td class="gt_row gt_right gt_striped">90.6%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">exports</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">41.7%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">28.6%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">13.2%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">gdp_composition_by_sector_of_origin_agriculture</td>
<td class="gt_row gt_right gt_striped">7.1%</td>
<td class="gt_row gt_right gt_striped">3.6%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">58.3%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">28.6%</td>
<td class="gt_row gt_right gt_striped">15.2%</td>
<td class="gt_row gt_right gt_striped">13.6%</td>
<td class="gt_row gt_right gt_striped">11.3%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">gdp_composition_by_sector_of_origin_industry</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">3.6%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">58.3%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">28.6%</td>
<td class="gt_row gt_right">12.1%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">9.4%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">gdp_composition_by_sector_of_origin_services</td>
<td class="gt_row gt_right gt_striped">7.1%</td>
<td class="gt_row gt_right gt_striped">3.6%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">58.3%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">28.6%</td>
<td class="gt_row gt_right gt_striped">12.1%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">9.4%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">gini_index_coefficient_distribution_of_family_income</td>
<td class="gt_row gt_right">21.4%</td>
<td class="gt_row gt_right">14.5%</td>
<td class="gt_row gt_right">47.4%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">33.3%</td>
<td class="gt_row gt_right">83.3%</td>
<td class="gt_row gt_right">16.7%</td>
<td class="gt_row gt_right">42.9%</td>
<td class="gt_row gt_right">69.7%</td>
<td class="gt_row gt_right">36.4%</td>
<td class="gt_row gt_right">24.5%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">imports</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">1.8%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">41.7%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">28.6%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">15.1%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">industrial_production_growth_rate</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">52.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">28.6%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">7.5%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">inflation_rate_consumer_prices</td>
<td class="gt_row gt_right gt_striped">7.1%</td>
<td class="gt_row gt_right gt_striped">1.8%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">44.4%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">13.6%</td>
<td class="gt_row gt_right gt_striped">15.1%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">labor_force</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">61.1%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">42.4%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">9.4%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">military_expenditures</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">15.8%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">33.3%</td>
<td class="gt_row gt_right gt_striped">88.9%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">57.1%</td>
<td class="gt_row gt_right gt_striped">60.6%</td>
<td class="gt_row gt_right gt_striped">22.7%</td>
<td class="gt_row gt_right gt_striped">26.4%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">public_debt</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">5.3%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">52.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">28.6%</td>
<td class="gt_row gt_right">27.3%</td>
<td class="gt_row gt_right">13.6%</td>
<td class="gt_row gt_right">18.9%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">real_gdp_purchasing_power_parity</td>
<td class="gt_row gt_right gt_striped">7.1%</td>
<td class="gt_row gt_right gt_striped">1.8%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">41.7%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">15.2%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">7.5%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">real_gdp_growth_rate</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">47.2%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">28.6%</td>
<td class="gt_row gt_right">12.1%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">11.3%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">real_gdp_per_capita</td>
<td class="gt_row gt_right gt_striped">7.1%</td>
<td class="gt_row gt_right gt_striped">1.8%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">41.7%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">28.6%</td>
<td class="gt_row gt_right gt_striped">15.2%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">9.4%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">reserves_of_foreign_exchange_and_gold</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">75.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">57.1%</td>
<td class="gt_row gt_right">27.3%</td>
<td class="gt_row gt_right">13.6%</td>
<td class="gt_row gt_right">22.6%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">taxes_and_other_revenues</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">3.6%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">52.8%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">28.6%</td>
<td class="gt_row gt_right gt_striped">21.2%</td>
<td class="gt_row gt_right gt_striped">13.6%</td>
<td class="gt_row gt_right gt_striped">18.9%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">unemployment_rate</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">66.7%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">30.3%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">9.4%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">youth_unemployment_rate_ages_15_24</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">1.8%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">58.3%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">42.9%</td>
<td class="gt_row gt_right gt_striped">39.4%</td>
<td class="gt_row gt_right gt_striped">13.6%</td>
<td class="gt_row gt_right gt_striped">17.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">carbon_dioxide_emissions</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">75.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">44.4%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">18.2%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">18.9%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">electricity_installed_generating_capacity</td>
<td class="gt_row gt_right gt_striped">7.1%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">58.3%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">18.2%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">20.8%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">energy_consumption_per_capita</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">72.2%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">42.9%</td>
<td class="gt_row gt_right">30.3%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">26.4%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">revenue_from_coal</td>
<td class="gt_row gt_right gt_striped">21.4%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">15.8%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">72.2%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">42.9%</td>
<td class="gt_row gt_right gt_striped">27.3%</td>
<td class="gt_row gt_right gt_striped">22.7%</td>
<td class="gt_row gt_right gt_striped">24.5%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">revenue_from_forest_resources</td>
<td class="gt_row gt_right">21.4%</td>
<td class="gt_row gt_right">7.3%</td>
<td class="gt_row gt_right">5.3%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">55.6%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">42.9%</td>
<td class="gt_row gt_right">21.2%</td>
<td class="gt_row gt_right">18.2%</td>
<td class="gt_row gt_right">13.2%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">alcohol_consumption_per_capita</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">3.6%</td>
<td class="gt_row gt_right gt_striped">10.5%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">63.9%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">57.1%</td>
<td class="gt_row gt_right gt_striped">39.4%</td>
<td class="gt_row gt_right gt_striped">22.7%</td>
<td class="gt_row gt_right gt_striped">24.5%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">birth_rate</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">44.4%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">3.0%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">7.5%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">children_under_the_age_of_5_years_underweight</td>
<td class="gt_row gt_right gt_striped">28.6%</td>
<td class="gt_row gt_right gt_striped">18.2%</td>
<td class="gt_row gt_right gt_striped">26.3%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">22.2%</td>
<td class="gt_row gt_right gt_striped">77.8%</td>
<td class="gt_row gt_right gt_striped">16.7%</td>
<td class="gt_row gt_right gt_striped">71.4%</td>
<td class="gt_row gt_right gt_striped">66.7%</td>
<td class="gt_row gt_right gt_striped">40.9%</td>
<td class="gt_row gt_right gt_striped">79.2%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">death_rate</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">41.7%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">3.0%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">7.5%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">education_expenditures</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">10.5%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">63.9%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">28.6%</td>
<td class="gt_row gt_right gt_striped">18.2%</td>
<td class="gt_row gt_right gt_striped">18.2%</td>
<td class="gt_row gt_right gt_striped">22.6%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">infant_mortality_rate</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">44.4%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">3.0%</td>
<td class="gt_row gt_right">9.1%</td>
<td class="gt_row gt_right">7.5%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">life_expectancy_at_birth</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">44.4%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">3.0%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">7.5%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">maternal_mortality_ratio</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">1.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">75.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">57.1%</td>
<td class="gt_row gt_right">42.4%</td>
<td class="gt_row gt_right">22.7%</td>
<td class="gt_row gt_right">26.4%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">median_age</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">38.9%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">3.0%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">7.5%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">net_migration_rate</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">41.7%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">3.0%</td>
<td class="gt_row gt_right">4.5%</td>
<td class="gt_row gt_right">5.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">obesity_adult_prevalence_rate</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">1.8%</td>
<td class="gt_row gt_right gt_striped">10.5%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">58.3%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">57.1%</td>
<td class="gt_row gt_right gt_striped">39.4%</td>
<td class="gt_row gt_right gt_striped">22.7%</td>
<td class="gt_row gt_right gt_striped">24.5%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">population_total</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">11.1%</td>
<td class="gt_row gt_right">27.8%</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">14.3%</td>
<td class="gt_row gt_right">3.0%</td>
<td class="gt_row gt_right">4.5%</td>
<td class="gt_row gt_right">3.8%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">population_growth_rate</td>
<td class="gt_row gt_right gt_striped">7.1%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">30.6%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">3.0%</td>
<td class="gt_row gt_right gt_striped">4.5%</td>
<td class="gt_row gt_right gt_striped">3.8%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">tobacco_use</td>
<td class="gt_row gt_right">28.6%</td>
<td class="gt_row gt_right">20.0%</td>
<td class="gt_row gt_right">21.1%</td>
<td class="gt_row gt_right">100.0%</td>
<td class="gt_row gt_right">22.2%</td>
<td class="gt_row gt_right">63.9%</td>
<td class="gt_row gt_right">16.7%</td>
<td class="gt_row gt_right">57.1%</td>
<td class="gt_row gt_right">66.7%</td>
<td class="gt_row gt_right">22.7%</td>
<td class="gt_row gt_right">26.4%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">total_fertility_rate</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">100.0%</td>
<td class="gt_row gt_right gt_striped">11.1%</td>
<td class="gt_row gt_right gt_striped">44.4%</td>
<td class="gt_row gt_right gt_striped">0.0%</td>
<td class="gt_row gt_right gt_striped">14.3%</td>
<td class="gt_row gt_right gt_striped">3.0%</td>
<td class="gt_row gt_right gt_striped">9.1%</td>
<td class="gt_row gt_right gt_striped">7.5%</td>
</tr>
</tbody>
</table>


</div>
        
</div>
</div>
</section>
<section id="challenge-6" class="level2">
<h2 class="anchored" data-anchor-id="challenge-6">Challenge 6</h2>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<div class="line-block">Show the densty plot of every numeric variable in the People and Societies dataset as small multiples (facets), three subplots in each row.<br>
<span class="emoji" data-emoji="bulb">üí°</span> You will need to free up the scales as <code>facet_wrap(scales='free')</code></div>
</div>
</div>
<div id="71b27ba6" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    cia_pplsoc</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    .drop(<span class="st">"slug"</span>, <span class="st">"region"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    .unpivot(index<span class="op">=</span><span class="st">"name"</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    .pipe(ggplot)<span class="op">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    geom_density(aes(x<span class="op">=</span><span class="st">"value"</span>))<span class="op">+</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    facet_wrap(<span class="st">"variable"</span>, scales<span class="op">=</span><span class="st">"free"</span>, ncol<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Projects\Teaching\LUDataLiteracy\.venv\Lib\site-packages\plotnine\layer.py:293: PlotnineWarning: stat_density : Removed 431 rows containing non-finite values.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>
<figure class="figure">
<p><img src="5_Pivots_GT_sol_files/figure-html/cell-10-output-2.png" width="672" height="480" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="challenge-7" class="level2">
<h2 class="anchored" data-anchor-id="challenge-7">Challenge 7</h2>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pivot the descriptive table (<code>.describe()</code>) for all numeric variables in the Energy and Environment dataset, making it one row per variable (instead of one column per variable). Do you find this presentation of the summary statistics easier to read?</p>
</div>
</div>
<div id="cb26af6d" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    cia_enenv</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    .select(cs.numeric())</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    .describe()</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    .unpivot(index<span class="op">=</span><span class="st">"statistic"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    .pivot(on<span class="op">=</span><span class="st">"statistic"</span>, index<span class="op">=</span><span class="st">"variable"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (5, 10)</small>
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">variable</th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">null_count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
<tr class="even">
<th>str</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"carbon_dioxide_emissions"</td>
<td>218.0</td>
<td>8.0</td>
<td>1.7657e8</td>
<td>1.0012e9</td>
<td>0.0</td>
<td>1.442e6</td>
<td>9.017e6</td>
<td>5.7876e7</td>
<td>1.3506e10</td>
</tr>
<tr class="even">
<td>"electricity_installed_generati‚Ä¶</td>
<td>211.0</td>
<td>15.0</td>
<td>4.0202e7</td>
<td>2.0257e8</td>
<td>3000.0</td>
<td>359000.0</td>
<td>3.204e6</td>
<td>1.6926e7</td>
<td>2.5940e9</td>
</tr>
<tr class="odd">
<td>"energy_consumption_per_capita"</td>
<td>195.0</td>
<td>31.0</td>
<td>7.9249e7</td>
<td>1.1008e8</td>
<td>661000.0</td>
<td>1.1726e7</td>
<td>4.6564e7</td>
<td>1.02832e8</td>
<td>7.67202e8</td>
</tr>
<tr class="even">
<td>"revenue_from_coal"</td>
<td>186.0</td>
<td>40.0</td>
<td>0.142473</td>
<td>0.737287</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.01</td>
<td>8.62</td>
</tr>
<tr class="odd">
<td>"revenue_from_forest_resources"</td>
<td>204.0</td>
<td>22.0</td>
<td>1.12</td>
<td>2.443002</td>
<td>0.0</td>
<td>0.01</td>
<td>0.15</td>
<td>1.02</td>
<td>20.27</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
</section>
<section id="utrecht" class="level1">
<h1>Utrecht</h1>
<p>Answer the following challenges using the <a href="./Utrecht.html">Utrecht</a> dataset.</p>
<section id="challenge-8" class="level2">
<h2 class="anchored" data-anchor-id="challenge-8">Challenge 8</h2>
<div class="callout callout-style-default callout-challenge callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Challenge
</div>
</div>
<div class="callout-body-container callout-body">
<div class="line-block">Your friend is torn between choosing a small studio downtown Utrecht (located in Javastraat, ID = 5068) or one of the similarly-priced (same asking price) apartments along the Moerashoeve street in Nieuwegein. Could you show these two options side by side in a great table, showing the meaningful variables of comparison to highlight the trade-offs your friend will be making when choosing between these two options? Show the difference between the respective values in absolute values and in percent.<br>
<span class="emoji" data-emoji="bulb">üí°</span> If you want to extract a value, subset it to 1x1 dataframe and then extract with <code>.item()</code><br>
<span class="emoji" data-emoji="bulb">üí°</span> For the apartments in Nieuwegein, feel free to choose one that you think is the best. Explain your choice.</div>
</div>
</div>
<div id="82fbd409" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">## get the asking price</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>budget <span class="op">=</span> ut.<span class="bu">filter</span>(pl.col(<span class="st">"id"</span>) <span class="op">==</span> <span class="dv">5068</span>).select(<span class="st">"asking_price"</span>).item()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I take the largest retail value apartment in Nieuwegein, because otherwise apartment are the same.</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>apt_neu <span class="op">=</span> (</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    ut.<span class="bu">filter</span>(pl.col(<span class="st">"city"</span>) <span class="op">==</span> <span class="st">"Nieuwegein"</span>, pl.col(<span class="st">"asking_price"</span>) <span class="op">==</span> budget)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    .sort(<span class="st">"retail_value"</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    .tail(<span class="dv">1</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    .select(<span class="st">"id"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    .item()</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    ut.<span class="bu">filter</span>(pl.col(<span class="st">"id"</span>).is_in([<span class="dv">5068</span>, apt_neu]))</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    .select(</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># "id",</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"house_area"</span>,</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"garden_size"</span>,</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"rooms"</span>,</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"build_year"</span>,</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"retail_value"</span>,</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        <span class="co">#    "energy_label",</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"street"</span>,</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        <span class="co">#    "city",</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"dist_from_train"</span>,</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    .unpivot(index<span class="op">=</span><span class="st">"street"</span>)</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    .pivot(on<span class="op">=</span><span class="st">"street"</span>, values<span class="op">=</span><span class="st">"value"</span>)</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>        difference<span class="op">=</span>pl.col(<span class="st">"Moerashoeve"</span>) <span class="op">-</span> pl.col(<span class="st">"Javastraat"</span>),</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>        pct_difference<span class="op">=</span>pl.col(<span class="st">"Moerashoeve"</span>)<span class="op">/</span>pl.col(<span class="st">"Javastraat"</span>)<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>    .pipe(GT)</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    .fmt_percent(columns<span class="op">=</span><span class="st">"pct_difference"</span>, decimals<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>    .opt_stylize(<span class="dv">1</span>)</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div id="yhkoxbglut" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#yhkoxbglut table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#yhkoxbglut thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#yhkoxbglut p { margin: 0; padding: 0; }
 #yhkoxbglut .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #004D80; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #004D80; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #yhkoxbglut .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #yhkoxbglut .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #yhkoxbglut .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #yhkoxbglut .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #yhkoxbglut .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; }
 #yhkoxbglut .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #yhkoxbglut .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #yhkoxbglut .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #yhkoxbglut .gt_column_spanner_outer:first-child { padding-left: 0; }
 #yhkoxbglut .gt_column_spanner_outer:last-child { padding-right: 0; }
 #yhkoxbglut .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #yhkoxbglut .gt_spanner_row { border-bottom-style: hidden; }
 #yhkoxbglut .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #yhkoxbglut .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; vertical-align: middle; }
 #yhkoxbglut .gt_from_md> :first-child { margin-top: 0; }
 #yhkoxbglut .gt_from_md> :last-child { margin-bottom: 0; }
 #yhkoxbglut .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #89D3FE; border-left-style: none; border-left-width: 1px; border-left-color: #89D3FE; border-right-style: none; border-right-width: 1px; border-right-color: #89D3FE; vertical-align: middle; overflow-x: hidden; }
 #yhkoxbglut .gt_stub { color: #FFFFFF; background-color: #0076BA; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #0076BA; padding-left: 5px; padding-right: 5px; }
 #yhkoxbglut .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #yhkoxbglut .gt_row_group_first td { border-top-width: 2px; }
 #yhkoxbglut .gt_row_group_first th { border-top-width: 2px; }
 #yhkoxbglut .gt_striped { color: #333333; background-color: #F4F4F4; }
 #yhkoxbglut .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #0076BA; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #0076BA; }
 #yhkoxbglut .gt_grand_summary_row { color: #333333; background-color: #89D3FE; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }
 #yhkoxbglut .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }
 #yhkoxbglut .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }
 #yhkoxbglut .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #yhkoxbglut .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #yhkoxbglut .gt_left { text-align: left; }
 #yhkoxbglut .gt_center { text-align: center; }
 #yhkoxbglut .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #yhkoxbglut .gt_font_normal { font-weight: normal; }
 #yhkoxbglut .gt_font_bold { font-weight: bold; }
 #yhkoxbglut .gt_font_italic { font-style: italic; }
 #yhkoxbglut .gt_super { font-size: 65%; }
 #yhkoxbglut .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #yhkoxbglut .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="variable" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">variable</th>
<th id="Javastraat" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Javastraat</th>
<th id="Moerashoeve" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Moerashoeve</th>
<th id="difference" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">difference</th>
<th id="pct_difference" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">pct_difference</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left">house_area</td>
<td class="gt_row gt_right">47.0</td>
<td class="gt_row gt_right">64.0</td>
<td class="gt_row gt_right">17.0</td>
<td class="gt_row gt_right">36.2%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">garden_size</td>
<td class="gt_row gt_right gt_striped">13.0</td>
<td class="gt_row gt_right gt_striped">0.0</td>
<td class="gt_row gt_right gt_striped">-13.0</td>
<td class="gt_row gt_right gt_striped">‚àí100.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">rooms</td>
<td class="gt_row gt_right">1.0</td>
<td class="gt_row gt_right">2.0</td>
<td class="gt_row gt_right">1.0</td>
<td class="gt_row gt_right">100.0%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">build_year</td>
<td class="gt_row gt_right gt_striped">1910.0</td>
<td class="gt_row gt_right gt_striped">2012.0</td>
<td class="gt_row gt_right gt_striped">102.0</td>
<td class="gt_row gt_right gt_striped">5.3%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">retail_value</td>
<td class="gt_row gt_right">386.0</td>
<td class="gt_row gt_right">370.0</td>
<td class="gt_row gt_right">-16.0</td>
<td class="gt_row gt_right">‚àí4.1%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped">dist_from_train</td>
<td class="gt_row gt_right gt_striped">0.76</td>
<td class="gt_row gt_right gt_striped">4.27</td>
<td class="gt_row gt_right gt_striped">3.51</td>
<td class="gt_row gt_right gt_striped">461.8%</td>
</tr>
</tbody>
</table>


</div>
        
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Lund University</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Data Literacy with Python</p>
</div>
  </div>
</footer>




</body></html>